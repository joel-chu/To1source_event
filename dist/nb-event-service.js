!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).NBEventService=r()}(this,function(){"use strict";var t=new WeakMap,r=new WeakMap,e=function(t){void 0===t&&(t={}),t.logger&&"function"==typeof t.logger&&(this.logger=t.logger)},_={$store:{configurable:!0},__normalStore__:{configurable:!0},__lazyStore__:{configurable:!0}};return e.prototype.logger=function(){},e.prototype.$on=function(t,r,e){var _=this.__prepare__(t,r),o=_[0],n=_[1];if(!1===this.__executeLazyStore__(t,r,e,o)){if(!n[t]){var i=[this.__constructToStore__(o,r,e)];return this.__normalStore__=this.__merge__(n,t,i),this.logger("init store",t,i),!0}if(!this.__find__(n[t],o))return n[t].push(this.__constructToStore__(o,r,e)),this.__normalStore__=n,this.logger("append to store",payload),!0}return!1},e.prototype.$once=function(t,r,e){var _=this.__prepare__(t,r),o=_[0],n=_[1];if(!1===this.__executeLazyStore__(t,r,e,o)&&!n[t]){var i=this.__normalStore__,s=[this.__constructToStore__(o,r,e)];return this.__normalStore__=this.__merge__(i,t,s),!0}return!1},e.prototype.$trigger=function(t,r,e){var _=this,o=this.__normalStore__;(t=Array.isArray(t)?t:[t]).forEach(function(t){if(!o[t]){_.logger("not registered put this in lazy store",t);var n=_.__lazyStore__;return r=Array.isArray(r)?r:[r],n[t]?n[t].push(r):n[t]=[r],_.__lazyStore__=n,!1}o[t].forEach(function(t){r=Array.isArray(r)?r:[r];t[0];var _=t[1];_.fn.apply(e||_.context,r)})})},e.prototype.$off=function(t){var r=this.__normalStore__;return!(!r[t]||!Reflect.deleteProperty(r,t))&&(this.__normalStore__=r,!0)},_.$store.get=function(){return this.__normalStore__},e.prototype.__executeLazyStore__=function(t,r,e,_){var o=this.__lazyStore__;if(o[t]){o[t].forEach(function(t){r.apply(e,t)});var n=this.__normalStore__,i=[this.__constructToStore__(_,r,e)];return this.__normalStore__=this.__merge__(n,t,i),Reflect.deleteProperty(o,t)&&(this.__lazyStore__=o),!0}return!1},e.prototype.__merge__=function(t,r,e){return t[r]=e,t},_.__normalStore__.set=function(r){t.set(this,r)},_.__normalStore__.get=function(){return t.get(this)||{}},_.__lazyStore__.set=function(t){r.set(this,t)},_.__lazyStore__.get=function(){return r.get(this)||{}},e.prototype.__prepare__=function(t,r,e){if(void 0===e&&(e="store"),"string"!=typeof t)throw"Expect evt to be string";var _=this["__"+("store"===e?"normalStore":"lazyStore")+"__"];return[this.__hashCode__(r),_]},e.prototype.__constructToStore__=function(t,r,e){return void 0===e&&(e=null),[t,{fn:r,context:e}]},e.prototype.__find__=function(t,r){return!!t.filter(function(t){return t[0]===r}).length},e.prototype.__hashCode__=function(t){return t.toString().split("").reduce(function(t,r){return(t=(t<<5)-t+r.charCodeAt(0))&t},0)},Object.defineProperties(e.prototype,_),e});
//# sourceMappingURL=nb-event-service.js.map
